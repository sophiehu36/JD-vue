(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"0a3e":function(t,e,c){},"0fa5":function(t,e,c){"use strict";c("d466")},1148:function(t,e,c){"use strict";var n=c("a691"),a=c("1d80");t.exports="".repeat||function(t){var e=String(a(this)),c="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(c+=e);return c}},"408a":function(t,e,c){var n=c("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"5f6f":function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),a=Object(n["I"])("data-v-54a1a446");Object(n["t"])("data-v-54a1a446");var r={class:"wrapper"},o={class:"search"},i=Object(n["h"])("div",{class:"search__content"},[Object(n["h"])("span",{class:"search__content__icon iconfont"},""),Object(n["h"])("input",{class:"search__content__input",type:"text",placeholder:"请输入商品名称搜索"})],-1);Object(n["r"])();var s=a((function(t,e,c,a,s,l){var u=Object(n["x"])("ShopInfo"),d=Object(n["x"])("Content"),h=Object(n["x"])("Cart");return Object(n["q"])(),Object(n["d"])("div",r,[Object(n["h"])("div",o,[Object(n["h"])("div",{class:"search__back iconfont",onClick:e[1]||(e[1]=function(){return a.handleBackClick.apply(a,arguments)})},""),i]),Object(n["G"])(Object(n["h"])(u,{item:a.item,"hide-border":!0},null,8,["item"]),[[n["D"],a.item.imgUrl]]),Object(n["h"])(d,{shopName:a.item.name},null,8,["shopName"]),Object(n["h"])(h)])})),l=(c("96cf"),c("1da1")),u=c("6c02"),d=c("b775"),h=c("d7d0"),b=Object(n["I"])("data-v-f8bd6c3a");Object(n["t"])("data-v-f8bd6c3a");var _={class:"content"},p={class:"category"},j={class:"product"},O={class:"product__item__detail"},m={class:"product__item__title"},f={class:"product__item__sales"},v={class:"product__item__price"},C=Object(n["h"])("span",{class:"product__item__yen"},"¥",-1),g={class:"product__item__origin"},k={class:"product__number"};Object(n["r"])();var I=b((function(t,e,c,a,r,o){return Object(n["q"])(),Object(n["d"])("div",_,[Object(n["h"])("div",p,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.categories,(function(t,e){return Object(n["q"])(),Object(n["d"])("div",{class:{category__item:!0,"category__item--active":a.currentTab===t.tab},key:e,onClick:function(){return a.handleTabClick(t.tab)}},Object(n["z"])(t.name),11,["onClick"])})),128))]),Object(n["h"])("div",j,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.list,(function(t){return Object(n["q"])(),Object(n["d"])("div",{class:"product__item",key:t._id},[Object(n["h"])("img",{class:"product__item__img",src:t.imgUrl,alt:""},null,8,["src"]),Object(n["h"])("div",O,[Object(n["h"])("h4",m,Object(n["z"])(t.name),1),Object(n["h"])("p",f,"月售"+Object(n["z"])(t.sales)+"件",1),Object(n["h"])("p",v,[C,Object(n["g"])(Object(n["z"])(t.price)+" ",1),Object(n["h"])("span",g,"¥"+Object(n["z"])(t.oldPrice),1)])]),Object(n["h"])("div",k,[Object(n["G"])(Object(n["h"])("span",{class:"product__number__minus",onClick:function(){return a.changeCartItem(a.shopId,t._id,t,-1,c.shopName)}},"-",8,["onClick"]),[[n["D"],a.getProductCartCount(a.cartList,a.shopId,t._id)]]),Object(n["g"])(" "+Object(n["z"])(a.getProductCartCount(a.cartList,a.shopId,t._id))+" ",1),Object(n["h"])("span",{class:"product__number__plus",onClick:function(){return a.changeCartItem(a.shopId,t._id,t,1,c.shopName)}},"+",8,["onClick"])])])})),128))])])})),w=c("75c9"),x=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"}],y=function(){var t=Object(n["v"])(x[0].tab),e=function(e){console.log(e),t.value=e};return{currentTab:t,handleTabClick:e}},z=function(t,e){var c=Object(n["u"])({list:[]}),a=function(){var n=Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(d["a"])("/api/shop/".concat(e,"/products"),{tab:t.value});case 2:r=n.sent,0===(null===r||void 0===r?void 0:r.errno)&&(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.length)&&(c.list=r.data),console.log(r);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(n["F"])((function(){a()}));var r=Object(n["A"])(c),o=r.list;return{list:o}},L={name:"Content",props:["shopName"],setup:function(){var t=Object(u["c"])(),e=t.params.id,c=y(),n=c.currentTab,a=c.handleTabClick,r=z(n,e),o=r.list,i=Object(w["a"])(),s=i.cartList,l=i.changeCartItem,d=function(t,e,c){var n,a,r;return(null===t||void 0===t||null===(n=t[e])||void 0===n||null===(a=n.productList)||void 0===a||null===(r=a[c])||void 0===r?void 0:r.count)||""};return{list:o,cartList:s,shopId:e,currentTab:n,categories:x,handleTabClick:a,changeCartItem:l,getProductCartCount:d}}};c("0fa5");L.render=I,L.__scopeId="data-v-f8bd6c3a";var q=L,N=Object(n["I"])("data-v-c3833d6c");Object(n["t"])("data-v-c3833d6c");var S={class:"cart"},P={key:0,class:"product"},T={class:"product__header"},F={class:"product__header__all"},A=Object(n["g"])(" 全选 "),D={class:"product__header__clear"},R={key:0,class:"product__item"},B={class:"product__item__detail"},G={class:"product__item__title"},U={class:"product__item__price"},E=Object(n["h"])("span",{class:"product__item__yen"},"¥",-1),J={class:"product__item__origin"},M={class:"product__number"},W={class:"check"},H={class:"check__icon"},K={class:"check__icon__tag"},Q={class:"check__info"},V=Object(n["g"])(" 总计："),X={class:"check__info__price"},Y={class:"check__btn"},Z=Object(n["g"])("去结算");Object(n["r"])();var $=N((function(t,e,c,a,r,o){var i=Object(n["x"])("router-link");return Object(n["q"])(),Object(n["d"])(n["a"],null,[a.showCart&&a.calculations.total>0?(Object(n["q"])(),Object(n["d"])("div",{key:0,class:"mask",onClick:e[1]||(e[1]=function(){return a.handleCartShowChange.apply(a,arguments)})})):Object(n["e"])("",!0),Object(n["h"])("div",S,[a.showCart&&a.calculations.total>0?(Object(n["q"])(),Object(n["d"])("div",P,[Object(n["h"])("div",T,[Object(n["h"])("div",F,[Object(n["h"])("span",{class:["product__header__checked iconfont",{isChecked:a.calculations.allChecked}],onClick:e[2]||(e[2]=function(){return a.handleAllChecked(a.shopId,a.calculations.allChecked)})},"",2),A]),Object(n["h"])("div",D,[Object(n["h"])("span",{class:"product__header__clear__btn",onClick:e[3]||(e[3]=function(){return a.clearCartProducts(a.shopId)})},"清空购物车")])]),(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.productList,(function(t){return Object(n["q"])(),Object(n["d"])(n["a"],{key:t._id},[t.count?(Object(n["q"])(),Object(n["d"])("div",R,[Object(n["h"])("div",{class:["product__item__checked iconfont",{isChecked:t.check}],onClick:function(){return a.changeCartItemChecked(a.shopId,t._id)}},"  ",10,["onClick"]),Object(n["h"])("img",{class:"product__item__img",src:t.imgUrl,alt:""},null,8,["src"]),Object(n["h"])("div",B,[Object(n["h"])("h4",G,Object(n["z"])(t.name),1),Object(n["h"])("p",U,[E,Object(n["g"])(Object(n["z"])(t.price)+" ",1),Object(n["h"])("span",J,"¥"+Object(n["z"])(t.oldPrice),1)])]),Object(n["h"])("div",M,[Object(n["G"])(Object(n["h"])("span",{class:"product__number__minus",onClick:function(){return a.changeCartItemInfo(a.shopId,t._id,t,-1)}},"-",8,["onClick"]),[[n["D"],t.count]]),Object(n["g"])(" "+Object(n["z"])(t.count||"")+" ",1),Object(n["h"])("span",{class:"product__number__plus",onClick:function(){return a.changeCartItemInfo(a.shopId,t._id,t,1)}},"+",8,["onClick"])])])):Object(n["e"])("",!0)],64)})),128))])):Object(n["e"])("",!0),Object(n["h"])("div",W,[Object(n["h"])("div",H,[Object(n["h"])("img",{class:"check__icon__img",src:"http://www.dell-lee.com/imgs/vue3/basket.png",alt:"",onClick:e[4]||(e[4]=function(){return a.handleCartShowChange.apply(a,arguments)})}),Object(n["h"])("div",K,Object(n["z"])(a.calculations.count),1)]),Object(n["h"])("div",Q,[V,Object(n["h"])("span",X,"¥ "+Object(n["z"])(a.calculations.total),1)]),Object(n["G"])(Object(n["h"])("div",Y,[Object(n["h"])(i,{to:{path:"/orderConfirmation/".concat(a.shopId)}},{default:N((function(){return[Z]})),_:1},8,["to"])],512),[[n["D"],a.calculations.total>0]])])])],64)})),tt=c("5502"),et=function(){var t=Object(tt["b"])(),e=Object(u["c"])(),c=e.params.id,n=function(e,c){t.commit("changeCartItemChecked",{shopId:e,productId:c})},a=function(e,c){t.commit("handleAllChecked",{shopId:e,allChecked:c})},r=function(e){t.commit("clearCartProducts",{shopId:e})},o=Object(w["a"])(c),i=o.productList,s=o.calculations,l=o.changeCartItemInfo;return{shopId:c,calculations:s,productList:i,changeCartItemInfo:l,changeCartItemChecked:n,clearCartProducts:r,handleAllChecked:a}},ct=function(){var t=Object(n["v"])(!1),e=function(){t.value=!t.value};return{showCart:t,handleCartShowChange:e}},nt={name:"Cart",setup:function(){var t=ct(),e=t.showCart,c=t.handleCartShowChange,n=et(),a=n.shopId,r=n.calculations,o=n.productList,i=n.changeCartItemInfo,s=n.changeCartItemChecked,l=n.clearCartProducts,u=n.handleAllChecked;return{showCart:e,handleCartShowChange:c,shopId:a,calculations:r,productList:o,changeCartItemInfo:i,changeCartItemChecked:s,clearCartProducts:l,handleAllChecked:u}}};c("b8dc");nt.render=$,nt.__scopeId="data-v-c3833d6c";var at=nt,rt=function(){var t=Object(u["c"])(),e=Object(n["u"])({item:{}}),c=function(){var c=Object(l["a"])(regeneratorRuntime.mark((function c(){var n;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,Object(d["a"])("/api/shop/".concat(t.params.id));case 2:n=c.sent,console.log(n),0===(null===n||void 0===n?void 0:n.errno)&&(null===n||void 0===n?void 0:n.data)&&(e.item=n.data);case 5:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}(),a=Object(n["A"])(e),r=a.item;return{item:r,getItemData:c}},ot={name:"Shop",components:{ShopInfo:h["a"],Content:q,Cart:at},setup:function(){var t=Object(u["d"])(),e=rt(),c=e.item,n=e.getItemData;n();var a=function(){t.back()};return{item:c,getItemData:n,handleBackClick:a}}};c("86e3");ot.render=s,ot.__scopeId="data-v-54a1a446";e["default"]=ot},"75c9":function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));c("b680");var n=c("7a23"),a=c("5502"),r=function(t){var e=Object(a["b"])(),c=e.state.cartList,r=function(t,c,n,a){console.log(t,c,n),e.commit("changeCartItemInfo",{shopId:t,productId:c,productInfo:n,num:a})},o=function(t,c){e.commit("changeShopName",{shopId:t,shopName:c})},i=function(t,e,c,n,a){r(t,e,c,n),o(t,a)},s=Object(n["b"])((function(){var e,n=(null===(e=c[t])||void 0===e?void 0:e.productList)||{},a={};for(var r in n){var o=n[r];o.count>0&&(a[r]=o)}return a})),l=Object(n["b"])((function(){var e,n=(null===(e=c[t])||void 0===e?void 0:e.shopName)||"";return n})),u=Object(n["b"])((function(){var e,n=null===(e=c[t])||void 0===e?void 0:e.productList,a=0,r=0,o=!0;if(n)for(var i in n){var s=n[i];a+=s.count,s.check&&(r+=s.count*s.price),s.count&&!s.check&&(o=!1)}return{count:a,total:r.toFixed(2),allChecked:o}}));return{cartList:c,productList:s,shopName:l,calculations:u,changeCartItemInfo:r,changeCartItem:i}}},"86e3":function(t,e,c){"use strict";c("0a3e")},ac83:function(t,e,c){},b680:function(t,e,c){"use strict";var n=c("23e7"),a=c("a691"),r=c("408a"),o=c("1148"),i=c("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,c){return 0===e?c:e%2===1?u(t,e-1,c*t):u(t*t,e/2,c)},d=function(t){var e=0,c=t;while(c>=4096)e+=12,c/=4096;while(c>=2)e+=1,c/=2;return e},h=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){s.call({})}));n({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,c,n,i,s=r(this),h=a(t),b=[0,0,0,0,0,0],_="",p="0",j=function(t,e){var c=-1,n=e;while(++c<6)n+=t*b[c],b[c]=n%1e7,n=l(n/1e7)},O=function(t){var e=6,c=0;while(--e>=0)c+=b[e],b[e]=l(c/t),c=c%t*1e7},m=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==b[t]){var c=String(b[t]);e=""===e?c:e+o.call("0",7-c.length)+c}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(_="-",s=-s),s>1e-21)if(e=d(s*u(2,69,1))-69,c=e<0?s*u(2,-e,1):s/u(2,e,1),c*=4503599627370496,e=52-e,e>0){j(0,c),n=h;while(n>=7)j(1e7,0),n-=7;j(u(10,n,1),0),n=e-1;while(n>=23)O(1<<23),n-=23;O(1<<n),j(1,1),O(2),p=m()}else j(0,c),j(1<<-e,0),p=m()+o.call("0",h);return h>0?(i=p.length,p=_+(i<=h?"0."+o.call("0",h-i)+p:p.slice(0,i-h)+"."+p.slice(i-h))):p=_+p,p}})},b8dc:function(t,e,c){"use strict";c("d897")},b978:function(t,e,c){"use strict";c("ac83")},d466:function(t,e,c){},d7d0:function(t,e,c){"use strict";c("b0c0");var n=c("7a23"),a=Object(n["I"])("data-v-3a671b14");Object(n["t"])("data-v-3a671b14");var r={class:"shop"},o={class:"shop__content__title"},i={class:"shop__content__tags"},s={class:"shop__content__tag"},l={class:"shop__content__tag"},u={class:"shop__content__tag"},d={class:"shop__content__highlight"};Object(n["r"])();var h=a((function(t,e,c,a,h,b){return Object(n["q"])(),Object(n["d"])("div",r,[Object(n["h"])("img",{src:c.item.imgUrl,alt:"",class:"shop__img"},null,8,["src"]),Object(n["h"])("div",{class:["shop__content",{hideBorder:c.hideBorder}]},[Object(n["h"])("div",o,Object(n["z"])(c.item.name),1),Object(n["h"])("div",i,[Object(n["h"])("span",s,"月售"+Object(n["z"])(c.item.sales),1),Object(n["h"])("span",l,"起送¥"+Object(n["z"])(c.item.expressLimit),1),Object(n["h"])("span",u,"基础运费¥"+Object(n["z"])(c.item.expressPrice),1)]),Object(n["h"])("p",d,Object(n["z"])(c.item.slogan),1)],2)])})),b={name:"ShopInfo",props:["item","hideBorder"]};c("b978");b.render=h,b.__scopeId="data-v-3a671b14";e["a"]=b},d897:function(t,e,c){}}]);
//# sourceMappingURL=shop.04127d35.js.map