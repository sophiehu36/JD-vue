{"version":3,"sources":["webpack:///./src/components/Toast.vue","webpack:///./src/components/Toast.vue?d444","webpack:///./src/components/Toast.vue?e4c0","webpack:///./src/assets/imgs/user.png","webpack:///./src/views/login/Login.vue","webpack:///./src/views/login/Login.vue?c907","webpack:///./src/views/login/Login.vue?362f"],"names":["class","message","name","props","toastData","showToast","toastMsg","msg","setTimeout","render","__scopeId","module","exports","src","alt","type","placeholder","username","password","handleLogin","handleRegisterClick","router","data","value","console","log","result","errno","localStorage","isLogin","push","components","Toast","setup"],"mappings":"wOACOA,MAAM,S,wEAAX,eAAsC,MAAtC,EAAsC,eAAhB,EAAAC,SAAO,M,YAMhB,GACbC,KAAM,QACNC,MAAO,CAAC,YAIG,EAAiB,WAC5B,IAAMC,EAAY,eAAS,CACzBC,WAAW,EACXC,SAAU,KAEND,EAAY,SAAAE,GAChBH,EAAUC,WAAY,EACtBD,EAAUE,SAAWC,EACrBC,YAAW,WACTJ,EAAUC,WAAY,EACtBD,EAAUE,SAAW,KACpB,MAEL,MAAO,CAAEF,YAAWC,c,UCrBtB,EAAOI,OAAS,EAChB,EAAOC,UAAY,kBAEJ,U,yDCRf,W,uBCAAC,EAAOC,QAAU,IAA0B,yB,kLCCpCZ,MAAM,W,EACT,eAEM,OAFDA,MAAM,QAAM,CACf,eAAoE,OAA/DA,MAAM,eAAea,IAAA,IAAiCC,IAAI,O,MAE5Dd,MAAM,S,GACJA,MAAM,oB,GAGNA,MAAM,oB,GAIRA,MAAM,U,GAIJA,MAAM,iB,EAER,eAAyC,QAAnCA,MAAM,sBAAqB,KAAC,G,EAAO,eAAiB,YAAX,QAAI,G,sGAlB1D,eAsBM,MAtBN,EAsBM,CArBJ,EAGA,eAOM,MAPN,EAOM,CANJ,eAEM,MAFN,EAEM,C,eADJ,eAA6D,SAAtDe,KAAK,OAAOC,YAAY,S,qDAAkB,EAAAC,SAAQ,K,mBAAR,EAAAA,cAEnD,eAEM,MAFN,EAEM,C,eADJ,eAAgE,SAAzDF,KAAK,WAAWC,YAAY,Q,qDAAiB,EAAAE,SAAQ,K,mBAAR,EAAAA,gBAGxD,eAQM,MARN,EAQM,CAPJ,eAEM,OAFDlB,MAAM,gBAAiB,QAAK,8BAAE,EAAAmB,YAAA,sBAAa,QAGhD,eAGM,MAHN,EAGM,CAFJ,eACC,QADM,QAAK,8BAAE,EAAAC,oBAAA,sBAAqB,QAClC,EAAyC,MAGjC,EAAAhB,UAAUC,W,iBAAvB,eAAkE,G,MAA/BJ,QAAS,EAAAG,UAAUE,U,4GAYpD,EAAiB,SAAAD,GACrB,IAAMgB,EAAS,iBACTC,EAAO,eAAS,CACpBL,SAAU,GACVC,SAAU,KAJsB,EAMH,eAAOI,GAA9BL,EAN0B,EAM1BA,SAAUC,EANgB,EAMhBA,SAEZC,EAAU,yDAAI,uGACK,KAAnBF,EAASM,OAAmC,KAAnBL,EAASK,MADpB,wBAEhBC,QAAQC,IAAI,YAAaR,EAAU,YAAaC,GAFhC,kBAIO,eAAK,kBAAmB,CAC3CD,SAAUA,EAASM,MACnBL,SAAUA,EAASK,QANP,OAIRG,EAJQ,OAQdF,QAAQC,IAAIC,GACU,KAAZ,OAANA,QAAM,IAANA,OAAA,EAAAA,EAAQC,QACVC,aAAaC,SAAU,EACvBR,EAAOS,KAAK,CAAE5B,KAAM,UAEpBG,EAAU,QAbE,qDAgBdA,EAAU,QAhBI,gCAmBhBA,EAAU,aAnBM,0DAAJ,qDAuBhB,MAAO,CAAEY,WAAUC,WAAUC,gBAGhB,GACbjB,KAAM,QACN6B,WAAY,CAAEC,QAAA,MAEdC,MAJa,WAKX,IAAMZ,EAAS,iBADT,EAG2B,iBAAzBjB,EAHF,EAGEA,UAAWC,EAHb,EAGaA,UAHb,EAIsC,EAAeA,GAAnDY,EAJF,EAIEA,SAAUC,EAJZ,EAIYA,SAAUC,EAJtB,EAIsBA,YAEtBC,EAAsB,WAC1BC,EAAOS,KAAK,CAAE5B,KAAM,cAGtB,MAAO,CAAEiB,cAAaC,sBAAqBH,WAAUC,WAAUd,e,UC7EnE,EAAOK,OAAS,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCRf","file":"js/login.cc1b8d4f.js","sourcesContent":["<template>\r\n  <div class=\"toast\">{{ message }}</div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"@vue/reactivity\";\r\n\r\nexport default {\r\n  name: \"Toast\",\r\n  props: [\"message\"]\r\n};\r\n\r\n// 管理toast相关的属性和方法\r\nexport const useToastEffect = () => {\r\n  const toastData = reactive({\r\n    showToast: false,\r\n    toastMsg: \"\"\r\n  });\r\n  const showToast = msg => {\r\n    toastData.showToast = true;\r\n    toastData.toastMsg = msg;\r\n    setTimeout(() => {\r\n      toastData.showToast = false;\r\n      toastData.toastMsg = \"\";\r\n    }, 2000);\r\n  };\r\n  return { toastData, showToast };\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.toast {\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%);\r\n  padding: 0.14rem;\r\n  border-radius: 0.05rem;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  color: #fff;\r\n}\r\n</style>\r\n","import { render } from \"./Toast.vue?vue&type=template&id=47bcef02&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=47bcef02&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-47bcef02\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=47bcef02&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/user.f605787e.png\";","<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"user\">\r\n      <img class=\"user__avatar\" src=\"../../assets/imgs/user.png\" alt=\"\" />\r\n    </div>\r\n    <div class=\"input\">\r\n      <div class=\"input__container\">\r\n        <input type=\"text\" placeholder=\"请输入用户名\" v-model=\"username\" />\r\n      </div>\r\n      <div class=\"input__container\">\r\n        <input type=\"password\" placeholder=\"请输入密码\" v-model=\"password\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"button\">\r\n      <div class=\"button__login\" @click=\"handleLogin\">\r\n        登陆\r\n      </div>\r\n      <div class=\"button__other\">\r\n        <span @click=\"handleRegisterClick\">立即注册</span\r\n        ><span class=\"button__other__gap\">|</span><span>忘记密码</span>\r\n      </div>\r\n    </div>\r\n    <Toast v-if=\"toastData.showToast\" :message=\"toastData.toastMsg\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 系统级别的引用放在顶部\r\nimport { reactive, toRefs } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n// 自己写的引用放在下面\r\nimport { post } from \"@/utils/request\";\r\nimport Toast, { useToastEffect } from \"@/components/Toast\";\r\n\r\nconst useLoginEffect = showToast => {\r\n  const router = useRouter();\r\n  const data = reactive({\r\n    username: \"\",\r\n    password: \"\"\r\n  });\r\n  const { username, password } = toRefs(data);\r\n\r\n  const handleLogin = async () => {\r\n    if (username.value !== \"\" && password.value !== \"\") {\r\n      console.log(\"username:\", username, \"password:\", password);\r\n      try {\r\n        const result = await post(\"/api/user/login\", {\r\n          username: username.value,\r\n          password: password.value\r\n        });\r\n        console.log(result);\r\n        if (result?.errno === 0) {\r\n          localStorage.isLogin = true;\r\n          router.push({ name: \"Home\" });\r\n        } else {\r\n          showToast(\"登录失败\");\r\n        }\r\n      } catch (e) {\r\n        showToast(\"请求失败\");\r\n      }\r\n    } else {\r\n      showToast(\"请输入用户名和密码\");\r\n    }\r\n  };\r\n\r\n  return { username, password, handleLogin };\r\n};\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: { Toast },\r\n  // setup职责就是告诉你，代码执行的一个流程\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    const { toastData, showToast } = useToastEffect();\r\n    const { username, password, handleLogin } = useLoginEffect(showToast);\r\n\r\n    const handleRegisterClick = () => {\r\n      router.push({ name: \"Register\" });\r\n    };\r\n\r\n    return { handleLogin, handleRegisterClick, username, password, toastData };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  z-index: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.user {\r\n  margin-bottom: 0.4rem;\r\n  &__avatar {\r\n    width: 0.66rem;\r\n    height: 0.66rem;\r\n  }\r\n}\r\n\r\n.input {\r\n  &__container {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 2.95rem;\r\n    height: 0.48rem;\r\n    background: #f9f9f9;\r\n    border: 0.01rem solid rgba(0, 0, 0, 0.1);\r\n    border-radius: 0.06rem;\r\n    margin-bottom: 0.16rem;\r\n    input {\r\n      width: 100%;\r\n      line-height: 0.24rem;\r\n      box-sizing: border-box;\r\n      font-size: 0.16rem;\r\n      padding-left: 0.16rem;\r\n      border: none;\r\n      background: transparent;\r\n      &:focus-visible {\r\n        outline: none;\r\n      }\r\n      &::placeholder {\r\n        color: rgba(0, 0, 0, 0.5);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.button {\r\n  margin-top: 0.16rem;\r\n  &__login {\r\n    width: 2.95rem;\r\n    height: 0.48rem;\r\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\r\n    border-radius: 0.04rem;\r\n    line-height: 0.48rem;\r\n    text-align: center;\r\n    background: #0091ff;\r\n    color: white;\r\n    font-size: 0.16rem;\r\n  }\r\n  &__other {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 0.16rem;\r\n    font-size: 0.14rem;\r\n    color: rgba(0, 0, 0, 0.5);\r\n    &__gap {\r\n      margin: 0 0.12rem;\r\n      font-size: 0.12rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=3e57e521&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=3e57e521&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3e57e521\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=3e57e521&lang=scss&scoped=true\""],"sourceRoot":""}